{% extends "base.html" %}
{% block content %}
<div class="glass-panel slide-in" style="max-width:800px; margin:auto;">
    <h2>Manage Staff Members</h2>
    <div class="form-section">
        <h4 class="section-title">Add New Employee</h4>
        <form method="POST">
            <div class="grid-2">
                <input type="text" name="new_fullname" placeholder="Full Name" required>
                <input type="text" name="new_username" placeholder="Username (for login)" required>
            </div>
            <div class="grid-2">
                <select name="new_role">
                    <option value="Employee">Employee</option>
                    <option value="Admin">Admin</option>
                </select>
                <input type="text" name="new_designation" placeholder="Designation (e.g., BDE)" required>
            </div>
            <button type="submit" class="submit-btn" style="margin-top:15px;">+ Add to System</button>
        </form>
    </div>

    <h3 style="margin-top:30px;">Current Staff List</h3>
    <table class="data-table">
        <tr><th>Name</th><th>Role</th><th>Designation</th><th>Action</th></tr>
        {% for s in staff %}
        <tr>
            <td>{{ s.full_name }}</td>
            <td><span class="badge {{ 'admin' if s.role == 'Admin' else 'emp' }}">{{ s.role }}</span></td>
            <td>{{ s.designation }}</td>
            <td>
                {% if s.role != 'Admin' %}
                <a href="{{ url_for('promote_user', id=s.id) }}" class="btn-promote">Promote to Admin</a>
                {% else %}
                <span style="opacity:0.5;">-</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
</div>
<style>
    .badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; }
    .admin { background: #ff6b6b; color: white; }
    .emp { background: #00e676; color: #000; }
    .btn-promote { text-decoration:none; background: #6c5ce7; color: white; padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; transition:0.3s; }
    .btn-promote:hover { background: #a29bfe; box-shadow: 0 0 10px #a29bfe; }
</style>
{% endblock %}
